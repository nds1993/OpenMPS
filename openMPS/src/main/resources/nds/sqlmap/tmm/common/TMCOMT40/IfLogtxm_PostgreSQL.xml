<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="IfLogtxm">
	
	<typeAlias  alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias  alias="ifLogtxmSerarchVO" type="nds.tmm.common.TMCOMT40.vo.IfLogtxmDefaultVO"/>
	
	<resultMap id="ifLogtxm" class="nds.tmm.common.TMCOMT40.vo.IfLogtxmVO">
		<result property="corpCode" column="corp_code" columnIndex="1"/>
		<result property="logtSeqq" column="logt_seqq" columnIndex="2"/>
		<result property="offiSyst" column="offi_syst" columnIndex="3"/>
		<result property="intrUsid" column="intr_usid" columnIndex="4"/>
		<result property="intrName" column="intr_name" columnIndex="5"/>
		<result property="resultCode" column="result_code" columnIndex="6"/>
		<result property="resultMsg" column="result_msg" columnIndex="7"/>
		<result property="intrDate" column="intr_date" columnIndex="8"/>
	</resultMap>
	
	<!-- paging parameter Global include -->
	<sql id="pagingParam_fragment">
		<isNotEqual property="pageSize" compareValue="0">
		         LIMIT #pageSize#
		</isNotEqual>
		<isNotEqual property="firstIndex" compareValue="0">
		         OFFSET #firstIndex#
		</isNotEqual>
	</sql>
	
	<select id="ifLogtxmDAO.selectIfLogtxm_S" resultMap="ifLogtxm">
		<![CDATA[
			SELECT
				corp_code
				, logt_seqq
				, offi_syst
				, intr_usid
				, intr_name
				, to_char(intr_date::timestamp, 'YYYY-MM-DD HH24:MI:SS') intr_date 
				, result_code
				, result_msg
			FROM openmps.if_logtxm
			WHERE corp_code=#corpCode#  
			 AND intr_name like '%' || #intrName# || '%'
			 AND to_char(intr_date::timestamp, 'yyyyMMdd') BETWEEN #frstDate# AND #lastDate#
			ORDER BY logt_seqq DESC
				]]>
	</select>
	
	<select id="ifLogtxmDAO.selectIfLogtxmList_D" parameterClass="ifLogtxmSerarchVO" resultClass="egovMap">
		<![CDATA[
			SELECT
				logt_seqq
				, offi_syst
				, intr_usid
				, intr_name
				, to_char(intr_date::timestamp, 'YYYY-MM-DD HH24:MI:SS') intr_date 
				, result_code
				, result_msg
			FROM openmps.if_logtxm
			WHERE corp_code = #corpCode# 
			 AND intr_name like '%' || #intrName# || '%'
			 AND to_char(intr_date::timestamp, 'yyyyMMdd') BETWEEN #frstDate# AND #lastDate#
			ORDER BY logt_seqq DESC
				]]>
	</select>	
	
	<select id="ifLogtxmDAO.selectIfLogtxmListTotCnt_S" parameterClass="ifLogtxmSerarchVO" resultClass="int">
		<![CDATA[
		SELECT count(*) FROM openmps.if_logtxm
		WHERE corp_code = #corpCode# 
		  AND intr_name like '%' || #intrName# || '%'
 		  AND to_char(intr_date::timestamp, 'yyyyMMdd') BETWEEN #frstDate# AND #lastDate#
				]]>
	</select>
	
</sqlMap>
