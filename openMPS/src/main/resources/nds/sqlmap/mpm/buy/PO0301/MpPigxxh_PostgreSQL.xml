<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="PO0301MpPigxxh">
	
	<typeAlias  alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias  alias="PO0301MpPigxxhSerarchVO" type="nds.mpm.buy.PO0301.vo.MpPigxxhVO"/>
	
	<resultMap id="PO0301MpPigxxh" class="nds.mpm.buy.PO0301.vo.MpPigxxhVO">
		<result property="corpCode" column="corp_code" columnIndex="1"/>
		<result property="procDate" column="proc_date" columnIndex="2"/>
		<result property="part1Weig1" column="part1_weig1" columnIndex="3"/>
		<result property="part1Weig2" column="part1_weig2" columnIndex="4"/>
		<result property="part2Weig1" column="part2_weig1" columnIndex="5"/>
		<result property="part2Weig2" column="part2_weig2" columnIndex="6"/>
		<result property="scraAmt" column="scra_amt" columnIndex="7"/>
		<result property="othAmt" column="oth_amt" columnIndex="8"/>
		<result property="memo" column="memo" columnIndex="9"/>
		<result property="deleYn" column="dele_yn" columnIndex="10"/>
		<result property="mdUser" column="md_user" columnIndex="11"/>
		<result property="mdDate" column="md_date" columnIndex="12"/>
		<result property="crUser" column="cr_user" columnIndex="13"/>
		<result property="crDate" column="cr_date" columnIndex="14"/>
	</resultMap>
	
	<insert id="PO0301MpPigxxhDAO.insertMpPigxxh">
		<![CDATA[
			INSERT INTO mp_pigxxh 
				( corp_code
				  , proc_date
				  , part1_weig1
				  , part1_weig2
				  , part2_weig1
				  , part2_weig2
				  , scra_amt
				  , oth_amt
				  , memo
				  , dele_yn
				  , md_user
				  , md_date
				  , cr_user
				  , cr_date )
			VALUES ( #corpCode#
				  , #procDate#
				  , #part1Weig1#
				  , #part1Weig2#
				  , #part2Weig1#
				  , #part2Weig2#
				  , #scraAmt#
				  , #othAmt#
				  , #memo#
				  , 'N'
				  , #mdUser#
				  , #mdDate#
				  , #crUser#
				  , now() )
			ON CONFLICT (corp_code, proc_date)
    		DO UPDATE SET
    			part1_weig1=#part1Weig1#
				, part1_weig2=#part1Weig2#
				, part2_weig1=#part2Weig1#
				, part2_weig2=#part2Weig2#
				, scra_amt=#scraAmt#
				, oth_amt=#othAmt#
				, memo=#memo#
				, md_user=#mdUser#
				, md_date=now()
		]]>
	</insert>
	
	<update id="PO0301MpPigxxhDAO.updateMpPigxxh">
		<![CDATA[
			UPDATE mp_pigxxh
			SET part1_weig1=#part1Weig1#
				, part1_weig2=#part1Weig2#
				, part2_weig1=#part2Weig1#
				, part2_weig2=#part2Weig2#
				, scra_amt=#scraAmt#
				, oth_amt=#othAmt#
				, memo=#memo#
				, md_user=#mdUser#
				, md_date=now()
						WHERE corp_code=#corpCode#
								AND proc_date=#procDate#
				]]>
	</update>
	
	<delete id="PO0301MpPigxxhDAO.deleteMpPigxxh">
		<![CDATA[
			update mp_pigxxh set dele_yn = 'Y'
						, md_user=#mdUser#
						, md_date=now()
						WHERE corp_code=#corpCode#
								AND proc_date=#procDate#
				]]>
	</delete>
	
	<select id="PO0301MpPigxxhDAO.selectMpPigxxh_S" resultMap="PO0301MpPigxxh">
		<![CDATA[
			SELECT
				corp_code
				, proc_date
				, part1_weig1
				, part1_weig2
				, part2_weig1
				, part2_weig2
				, scra_amt
				, oth_amt
				, memo
				, dele_yn
				, md_user
				, md_date
				, cr_user
				, cr_date
			FROM mp_pigxxh
			WHERE corp_code=#corpCode#
					AND proc_date=#procDate#
					and dele_yn = 'N'
				]]>
	</select>
	
	<select id="PO0301MpPigxxhDAO.selectMpPigxxhList_D" parameterClass="PO0301MpPigxxhSerarchVO" resultClass="egovMap">

	</select>	
	<select id="PO0301MpPigxxhDAO.selectMpPigxxhListTotCnt_S" parameterClass="PO0301MpPigxxhSerarchVO" resultClass="int">

	</select>

</sqlMap>
