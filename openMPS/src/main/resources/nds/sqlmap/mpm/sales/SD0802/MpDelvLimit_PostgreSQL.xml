<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="MpDelvLimit">
	
	<typeAlias  alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias  alias="mpDelvLimitSerarchVO" type="nds.mpm.sales.SD0802.vo.MpDelvLimitVO"/>
	
	<resultMap id="mpDelvLimit" class="nds.mpm.sales.SD0802.vo.MpDelvLimitVO">
		<result property="corpCode" column="corp_code" columnIndex="1"/>
		<result property="startDate" column="start_date" columnIndex="2"/>
		<result property="lastDate" column="last_date" columnIndex="3"/>
		<result property="dcCode" column="dc_code" columnIndex="4"/>
		<result property="proCode" column="pro_code" columnIndex="5"/>
		<result property="limitBox" column="limit_box" columnIndex="6"/>
		<result property="mdUser" column="md_user" columnIndex="7"/>
		<result property="mdDate" column="md_date" columnIndex="8"/>
		<result property="crUser" column="cr_user" columnIndex="9"/>
		<result property="crDate" column="cr_date" columnIndex="10"/>
	</resultMap>
	
	<insert id="mpDelvLimitDAO.insertMpDelvLimit">
		<![CDATA[
			INSERT INTO openmps.mp_delv_limit 
				( corp_code
				  , start_date
				  , last_date
				  , dc_code
				  , pro_code
				  , limit_box
				  , md_user
				  , md_date
				  , cr_user
				  , cr_date )
			VALUES ( #corpCode#
				  , #startDate#
				  , #lastDate#
				  , #dcCode#
				  , #proCode#
				  , #limitBox#::number(10,0)
				  , #mdUser#
				  , now()
				  , #crUser#
				  , now() )
		]]>
	</insert>
	
	<update id="mpDelvLimitDAO.updateMpDelvLimit">
		<![CDATA[
			UPDATE openmps.mp_delv_limit
			SET dc_code=#dcCode#
				, pro_code=#proCode#
				, limit_box=#limitBox#::number(10,0)
				, md_user=#mdUser#
				, md_date=now()
						WHERE corp_code=#corpCode#
								AND start_date=#startDate#
								AND last_date=#lastDate#
								AND dc_code=#dcCode#
								AND pro_code=#proCode#
				]]>
	</update>
	
	<delete id="mpDelvLimitDAO.deleteMpDelvLimit">
		<![CDATA[
			DELETE FROM openmps.mp_delv_limit 
						WHERE corp_code=#corpCode#
								AND start_date=#startDate#
								AND last_date=#lastDate#
								AND dc_code=#dcCode#
								AND pro_code=#proCode#
				]]>
	</delete>
	
	<select id="mpDelvLimitDAO.selectMpDelvLimit_S" resultMap="mpDelvLimit">
		<![CDATA[
			SELECT
				corp_code
				, start_date
				, last_date
				, dc_code
				, pro_code
				, limit_box
				, md_user
				, md_date
				, cr_user
				, cr_date
			FROM openmps.mp_delv_limit
						WHERE corp_code=#corpCode#
								AND start_date=#startDate#
								AND last_date=#lastDate#
								AND dc_code=#dcCode#
								AND pro_code=#proCode#
				]]>
	</select>
		
	<select id="mpDelvLimitDAO.selectMpDelvLimitList_D" parameterClass="mpDelvLimitSerarchVO" resultClass="egovMap">
		SELECT
				corp_code
				, start_date
				, last_date
				, dc_code
				, pro_code
				, limit_box
				, md_user
				, md_date
				, cr_user
				, cr_date
			FROM openmps.mp_delv_limit
			WHERE corp_code=#corpCode#
			AND start_date between #startDate# and #lastDate#
	</select>	
	<select id="mpDelvLimitDAO.selectMpDelvLimitListTotCnt_S" parameterClass="mpDelvLimitSerarchVO" resultClass="int">

	</select>

</sqlMap>
